<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
      <!ENTITY rfc2119 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
      <!ENTITY rfc6973 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.6973.xml'>
      <!ENTITY rfc3164 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3164.xml'>
      ]>
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="exp" docName="draft-rao-pitfol-00" ipr="trust200902">
  <front>
    <title abbrev="PITFoL">Personal Information Tagging for Logs
    (PITFoL)</title>

    <author fullname="Sandeep Rao" initials="S. " surname="Rao">
      <organization>Grab</organization>

      <address>
        <postal>
          <street/>

          <city>Bangalore</city>

          <region/>

          <code/>

          <country>India</country>
        </postal>

        <phone/>

        <facsimile/>

        <email>sandeeprao.ietf@gmail.com</email>

        <uri/>
      </address>
    </author>

    <author fullname="Shivan Sahib" initials="S. " surname="Sahib">
      <organization>Salesforce</organization>

      <address>
        <postal>
          <street/>

          <street/>

          <city/>

          <region/>

          <code/>

          <country/>
        </postal>

        <phone/>

        <facsimile/>

        <email>shivankaulsahib@gmail.com</email>

        <uri/>
      </address>
    </author>

    <author fullname="Ryan Guest" initials="R. " surname="Guest">
      <organization>Salesforce</organization>

      <address>
        <postal>
          <street/>

          <city/>

          <region/>

          <code/>

          <country/>
        </postal>

        <phone/>

        <facsimile/>

        <email>rguest@salesforce.com</email>

        <uri/>
      </address>
    </author>

    <date day="4" month="November" year="2019"/>

    <abstract>
      <t>Software systems typically generate log messages in the course of their operation. These log messages (or 'logs') record events as they happen, thus providing a trail that can be used to understand the state of the system and help with troubleshooting issues. Given that logs try to capture state that is useful for monitoring and debugging, they can contain information that can be used to identify users. Personal data identification and anonymization in logs is crucial to ensure that no personal data is being inadvertently logged and retained which would make the logging system run afoul of laws around storing private information. 

This document focuses on exploring mechanisms that can be used by a generating or intermediary logging service to specify personal or sensitive data in log message(s), thus allowing a downstream logging server to potentially enforce any redaction or transformation.

</t>
    </abstract>
    <note title="Requirements Language">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref
      target="RFC2119">RFC 2119</xref>.</t>
    </note>
  </front>

  <middle>
    <section title="Introduction">
      <t>Personal data identification and redaction is crucial to make sure
      that a logging application is not storing and potentially leaking
      users&rsquo; private information. There are known precedents that help
      discover and extract sensitive data, for example, we can define a
      regular expression or lookup rules that will match a person's name,
      credit card number, email address and so on. Besides, there are data
      dictionary based training models that can predict the
      presence of sensitive data. </t>

      <t>Once personal information is identified, it has to be
      appropriately tagged. Personal data tagging is especially important in
      cases where log data is flowing in from disparate sources. In cases
      where tagging at source is not possible (e.g. log data generated by a
      legacy IoT device, Web server or a Firewall), a centralized logging
      server can be tasked with making sure the log data is tagged before
      passing on downstream. Once the logs are tagged, the logging application
      can use anonymization techniques to redact the fields appropriately.</t>

      <t>[insert diagram showing flow of Privacy Logging Framework]</t>

      <t>This document focuses on the tagging aspect of log redaction. </t>
    </section>

    <section title="Terminology">
      <t>Personal data: <xref
      target="RFC6973">RFC 6973</xref> defines personal data as "any information
      relating to an individual who can be identified, directly or
      indirectly.&rdquo; This typically includes information such as IP
      addresses, username. However, the definition of personal data varies
      heavily by what other information is available, the jurisdiction of
      operation and other such factors. Hence, this document does not focus on
      prescriptively listing what log fields contain personal data but rather
      on what a tagging mechanism would look like once a logging application
      has determined which fields it considers to hold personal data. </t>
    </section>

    <section title="Motivation and Use Cases ">
      <t>Most systems like network devices, web servers and application
      services record information about user activity, transactions, network
      flows, etc., as log data. Logs are incredibly useful for various
      purposes such as security monitoring, application debugging and
      opertional maintenace. In addition, there are use cases of organizations
      exporting or sharing logs with third party log analyzers for purposes of
      security incident reponse, monitoring, business analytics, where logs
      can be valuable source of information. In such cases, there are concerns
      about potential exposure of personal data to unintented systems or
      receipients. This document explores techiques for tagging logs to aid
      identification of personal data.</t>
    </section>

    <section title="Challenges">
      <t>In most cases, what data is
      considered personal and sensitive is subjective, provisional and
      contextual to the data source or the application processing the data,
      which makes it hard to use automated techniques to identify personal
      data. </t>
      <t>The challenges are summarized as follows: </t>

      <t>- What comprises personal data is often subjective and use case
      specific. Even for a specific domain, it's controversial whether it is possible to definitively say that a piece of data is NOT identifying [add references to Prof Arvind Naryanan's work].  </t>

      <t>- There are many disparate types of personal data and often
      require multitude approaches for detection. </t>

      <t>- There are no standards that govern formats of sensitive data making
      automation difficult for most common use cases. </t>

    </section>

    <section title="Techniques">
      <t>Once personal information data is identified via manual detection,
      dictionary or dataset based training models, the log imposed with tag
      information either at field-level or the log-level.</t>

      <t>This is an example of a log message in <xref
      target="RFC3164">RFC 3164</xref> format. We can
      imagine that a logging application determines that user_name, err_user
      and ip_addr are fields that can contain sensitive personal data.</t>

      <t>&lt;120&gt; Nov 16 16:00:00 10.0.1.11 ABCDEFG: [AF@0
      event="AF-Authority failure" violation="A-Not authorized to object"
      actual_type="AF-A" jrn_seq="1001363" timestamp="20120418163258988000"
      job_name="QPADEV000B" user_name="XYZZY" job_number="256937"
      err_user="TESTFORAF" ip_addr="10.0.1.21" port="55875"
      action="Undefined(x00)" val_job="QPADEV000B" val_user="XYZZY"
      val_jobno="256937" object="TEST" object_library="CUS9242"
      object_type="*FILE" pgm_name="" pgm_libr="" workstation=""]</t>

      <section title="Field Level Tagging">
        <t>In the field-level tagging method, the identifed &lt;attribute,
        value&gt;field is tagged with a "pii_data=true" attribute specifying
        the field to be sensitive or personal. In case of log-level tagging
        approach, the data about fields that are personal is specified using
        "pii_name" attribute that contains list of one or more field deemed
        sensitive or personal.</t>

        <t>This log can be transformed as following using 'Field-level'
        tagging techique:</t>

        <t>&lt;120&gt; Apr 18 16:32:58 10.0.1.11 QAUDJRN: [AF@0
        event="AF-Authority failure" violation="A-Not authorized to object"
        actual_type="AF-A" jrn_seq="1001363" timestamp="20120418163258988000"
        job_name="QPADEV000B" {user_name="XYZZY" pii_data="true"}
        job_number="256937" {err_user="XYZZY" pii_data="true"]
        [ip_addr="10.0.1.21" pii_data="true"] port="55875"
        action="Undefined(x00)" val_job="QPADEV000B" val_jobno="256937"
        object="TEST" object_library="CUS9242" object_type="*FILE" pgm_name=""
        pgm_libr="" workstation=""]</t>
      </section>

      <section title="Log Level Tagging">
        <t>&lt;120&gt; Apr 18 16:32:58 10.0.1.11 QAUDJRN: [AF@0
        event="AF-Authority failure" violation="A-Not authorized to object"
        actual_type="AF-A" jrn_seq="1001363" timestamp="20120418163258988000"
        job_name="QPADEV000B" user_name="XYZZY" job_number="256937"
        err_user="XYZZY" ip_addr="10.0.1.21" port="55875"
        action="Undefined(x00)" val_job="QPADEV000B" val_jobno="256937"
        object="TEST" object_library="CUS9242" object_type="*FILE" pgm_name=""
        pgm_libr="" workstation="", pii=&rdquo;user_name,err_user,
        ip_addr&rdquo;]</t>

        <t>A new (metadata) "pii" field was added to the MSG part of the
        syslog log message.</t>

        <t>A more complicated example, that can be used to support the ability
        to radact different fields in different ways as per privacy
        preservation policy.</t>

        <t>&lt;120&gt; Apr 18 16:32:58 10.0.1.11 QAUDJRN: [AF@0
        event="AF-Authority failure" violation="A-Not authorized to object"
        actual_type="AF-A" jrn_seq="1001363" timestamp="20120418163258988000"
        job_name="QPADEV000B" user_name="XYZZY" job_number="256937"
        err_user="XYZZY" ip_addr="10.0.1.21" port="55875"
        action="Undefined(x00)" val_job="QPADEV000B" val_jobno="256937"
        object="TEST" object_library="CUS9242" object_type="*FILE" pgm_name=""
        pgm_libr="" workstation="", pii_name=&rdquo;user_name,err_user&rdquo;,
        pii_ipaddr=&rdquo;ip_addr&rdquo;]</t>

        <t>where the log data is tagged with "pii_name" and "pii_ipaddr"
        attributes that specifies the senstive data in the log at a granular
        level.</t>
      </section>

      <section title="Risk Classification">
        <t>
          TODO
        </t>
        </section>
    </section>

    <section anchor="IANA" title="IANA Considerations">
      <t>None</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>TBD: we should add this before publishing -01</t>
    </section>

    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>The authors would like to thank everyone who provided helpful comments at the mic at IETF 106 during the PEARG session.</t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      &rfc2119;
      &rfc6973;
      &rfc3164;
    </references>
  </back>
</rfc>
